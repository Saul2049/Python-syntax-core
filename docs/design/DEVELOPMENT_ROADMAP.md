# ğŸ›£ï¸ å¹¶è¡Œå¼€å‘è·¯çº¿å›¾

> **åˆ›å»ºæ—¶é—´**: 2025-05-25 12:55
> **W4çŠ¶æ€**: è¿è¡Œä¸­ (P95=3.10ms, RSS=18MB) âœ…
> **ç­–ç•¥**: è½»é‡çº§å¹¶è¡Œå¼€å‘ï¼Œä¿æŠ¤æ€§èƒ½æµ‹è¯•

---

## ğŸ¯ **Phase 1: å®‰å…¨å¹¶è¡Œä»»åŠ¡ (ç«‹å³å¯åŠ¨)**

### M1-1: Metrics Collector é‡æ„ ğŸ“Š
```bash
# æ–°å»ºåˆ†æ”¯
git checkout -b feature/metrics-collector-m1

# ä»»åŠ¡åˆ—è¡¨
- [ ] æ•´ç†ç°æœ‰metricsä»£ç åˆ° scripts/monitoring/metrics_collector.py
- [ ] ç»Ÿä¸€Prometheusæ ¼å¼è¾“å‡º
- [ ] æ·»åŠ ç±»å‹æ³¨è§£
- [ ] è½»é‡çº§å•å…ƒæµ‹è¯•
```

### M1-5: Health Check è„šæœ¬ ğŸ¥
```bash
# åˆ›å»ºå¥åº·æ£€æŸ¥å·¥å…·
- [ ] scripts/monitoring/health_check.py
- [ ] æ£€æŸ¥å†…å­˜ä½¿ç”¨ã€æ–‡ä»¶æè¿°ç¬¦ã€è¿›ç¨‹çŠ¶æ€
- [ ] æ”¯æŒ --quick å’Œ --full æ¨¡å¼
- [ ] JSONè¾“å‡ºæ ¼å¼ï¼Œä¾¿äºCIé›†æˆ
```

### S-0: Makefile å¼€å‘ç¯å¢ƒ ğŸ”§
```bash
# å¼€å‘ä½“éªŒä¼˜åŒ–
- [ ] make dev (venv + deps + pre-commit)
- [ ] make test-quick (fast unit tests)
- [ ] make lint (ruff + black + isort)
- [ ] make docs (MkDocs local serve)
```

---

## ğŸ¯ **Phase 2: ä¸­åº¦ä»»åŠ¡ (W4ç©ºé—²æœŸ)**

### M1-2: Grafana Dashboard ğŸ“ˆ
```bash
# ç›‘æ§å¯è§†åŒ–
- [ ] configs/grafana/dashboard.json
- [ ] Memory/CPU/Latency/GC/FD äº”æ¿å—
- [ ] æŠ¥è­¦é˜ˆå€¼å¯è§†åŒ–
- [ ] è‡ªåŠ¨åˆ·æ–°<5s
```

### S-1 & S-2: é…ç½®ä¸Pre-commit ğŸ› ï¸
```bash
# å¼€å‘å·¥å…·é“¾
- [ ] .env.example (å®Œæ•´é…ç½®ç¤ºä¾‹)
- [ ] setup_config.py (äº¤äº’å¼é…ç½®ç”Ÿæˆ)
- [ ] .pre-commit-config.yaml (ruff, black, isort)
- [ ] é’©å­æ‰§è¡Œæ—¶é—´ <5s
```

---

## ğŸš« **æš‚ç¼“ä»»åŠ¡ (ç­‰W4å®Œæˆ)**

- Type Hints å…¨é‡æ·»åŠ  (å¯èƒ½è§¦å‘é‡æ„)
- pandas 2.x è¿ç§» (æ€§èƒ½å½±å“æœªçŸ¥)
- å¤§è§„æ¨¡ç®—æ³•å‘é‡åŒ– (å·²é€šè¿‡W4éªŒè¯ï¼Œæš‚ç¼“)

---

## ğŸ“… **æ—¶é—´è½´è®¡åˆ’**

| æ—¶é—´æ®µ | ä¸»è¦ä»»åŠ¡ | W4çŠ¶æ€ | é£é™©çº§åˆ« |
|--------|----------|--------|----------|
| ä»Šå¤©ä¸‹åˆ | M1-1 Metricsé‡æ„ | è¿è¡Œä¸­ | ğŸŸ¢ LOW |
| æ˜å¤©ä¸Šåˆ | M1-5 Health Check | è¿è¡Œä¸­ | ğŸŸ¢ LOW |
| æ˜å¤©ä¸‹åˆ | S-0 Makefile Dev | è¿è¡Œä¸­ | ğŸŸ¢ LOW |
| W4å®Œæˆå | M1-2 Grafana + Phase2 | å®Œæˆ | ğŸŸ¡ MEDIUM |

---

## âš ï¸ **å®‰å…¨å¼€å‘å‡†åˆ™**

1. **èµ„æºéš”ç¦»**: æ–°åŠŸèƒ½å¼€å‘åœ¨ç‹¬ç«‹è¿›ç¨‹/è™šæ‹Ÿç¯å¢ƒ
2. **æ€§èƒ½ç›‘æ§**: æ¯30åˆ†é’Ÿæ£€æŸ¥W4çŠ¶æ€ï¼Œç¡®ä¿P95<6ms
3. **ä»£ç åˆ†æ”¯**: featureåˆ†æ”¯å¼€å‘ï¼Œé¿å…å½±å“main
4. **æµ‹è¯•ç­–ç•¥**: è½»é‡çº§å•å…ƒæµ‹è¯•ï¼Œé¿å…é›†æˆæµ‹è¯•
5. **ç´§æ€¥å›æ»š**: å¦‚W4æ€§èƒ½ä¸‹é™ï¼Œç«‹å³åœæ­¢å¼€å‘æ´»åŠ¨

---

## ğŸ¯ **æˆåŠŸæŒ‡æ ‡**

- W4 P95å»¶è¿Ÿä¿æŒ â‰¤6ms (å½“å‰3.10ms)
- W4 RSSä¿æŒ â‰¤40MB (å½“å‰18MB) 
- æ–°åŠŸèƒ½å¼€å‘è¿›åº¦ â‰¥50%/week
- ä»£ç è´¨é‡ä¸é™çº§ (linting, typing)

---

> **Next Actions**: ç«‹å³å¯åŠ¨M1-1 Metrics Collectoré‡æ„ 